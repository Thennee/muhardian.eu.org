<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Input Barang</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --blue1:#0d47ff;
  --blue2:#00c6ff;
}

*{box-sizing:border-box;font-family:Segoe UI,Arial;}

body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,var(--blue1),var(--blue2));
  display:flex;
  justify-content:center;
  align-items:center;
}

.card{
  width:100%;
  max-width:420px;
  background:rgba(255,255,255,.15);
  backdrop-filter: blur(10px);
  border-radius:18px;
  padding:20px 18px 24px;
  box-shadow:0 15px 35px rgba(0,0,0,.25);
  color:#fff;
  animation:fadeIn .6s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(15px);}
  to{opacity:1;transform:translateY(0);}
}

.logo{
  text-align:center;
  margin-bottom:10px;
}

.logo img{
  height:70px;
  object-fit:contain;
}

h2{
  text-align:center;
  margin:10px 0 18px;
}

.form-group{
  margin-bottom:12px;
}

label{
  font-size:13px;
  opacity:.9;
}

input,select{
  width:100%;
  padding:10px 12px;
  border-radius:10px;
  border:none;
  outline:none;
  margin-top:4px;
  font-size:14px;
}

input,select{
  background:#fff;
}

.actions{
  display:flex;
  gap:10px;
  margin-top:15px;
}

button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}

.btn-submit{
  background:linear-gradient(135deg,#00e5ff,#2979ff);
  color:#003;
}

.btn-scan{
  background:linear-gradient(135deg,#00ff9c,#00c853);
  color:#003;
}

button:hover{
  transform:translateY(-2px);
  filter:brightness(1.05);
}

.status{
  margin-top:10px;
  font-size:13px;
  text-align:center;
}
</style>
</head>
<body>

<div class="card">

  <div class="logo">
    <!-- Ganti dengan logo Anda -->
    <img src="https://muhardian.eu.org/riky/Logo2.png" alt="Logo">
  </div>

  <h2>Input Barang</h2>

  <form id="formBarang">

    <div class="form-group">
      <label>Tanggal</label>
      <input type="date" name="tanggal" required>
    </div>

    <div class="form-group">
      <label>Nama Barang</label>
      <input type="text" name="nama_barang" required>
    </div>

    <div class="form-group">
      <label>Jumlah / Qty</label>
      <input type="number" name="qty" required>
    </div>

    <div class="form-group">
      <label>Satuan</label>
      <select name="satuan" required>
        <option value="">Pilih</option>
        <option>Kg</option>
        <option>Liter</option>
        <option>Pcs</option>
        <option>Box/Peti</option>
      </select>
    </div>

    <div class="form-group">
      <label>Kode Barang</label>
      <select name="kode" required>
        <option value="">Pilih</option>
        <option value="BM">BM - Barang Masuk</option>
        <option value="BK">BK - Barang Keluar</option>
      </select>
    </div>

    <div class="actions">
      <button type="submit" class="btn-submit">Simpan</button>
      <button type="button" class="btn-scan" id="btnScan">Scan QR</button>
    </div>

  </form>

  <div class="status" id="status"></div>

</div>

<script>
/* GANTI DENGAN URL WEB APP ANDA */
const API_URL = "https://script.google.com/macros/s/AKfycbwnJkkiDOXcIqKuTsD4GLWBZV2uMjQpxAe_vJrkzTtCkumc7I93rgf7nVqK1RGoz-9c/exec";

document.getElementById("btnScan").addEventListener("click",()=>{
  const token = Date.now().toString();
  sessionStorage.setItem("scan_token", token);
  location.href = "scan.html?token="+token;
});

document.getElementById("formBarang").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const status = document.getElementById("status");
  status.textContent = "Mengirim data...";

  const formData = new FormData(e.target);

  const payload = {
    type:"form",
    tanggal: formData.get("tanggal"),
    nama_barang: formData.get("nama_barang"),
    qty: formData.get("qty"),
    satuan: formData.get("satuan"),
    kode: formData.get("kode")
  };

  try{
    const res = await fetch(API_URL,{
      method:"POST",
      body: JSON.stringify(payload)
    });

    const r = await res.json();
    if(r.status === "success"){
      status.textContent = "Data berhasil disimpan.";
      e.target.reset();
    }else{
      status.textContent = "Gagal menyimpan.";
    }

  }catch(err){
    status.textContent = "Koneksi gagal.";
  }
});
</script>

</body>
</html>

